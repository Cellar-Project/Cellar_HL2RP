'use strict';!function(f,h,g,k){XF.OembedFetcher=XF.Element.newHandler({options:{provider:"",id:""},init:function(){this.options.provider&&this.options.id&&f.ajax(XF.canonicalizeUrl("oembed.php"),{data:{provider:this.options.provider,id:this.options.id.replace(/#/,"{{_hash_}}")},success:XF.proxy(this,"handleResponse"),global:!1})},handleResponse:function(a,b,c){a.hasOwnProperty("html")?this.insertOembedHtml(a,c.getResponseHeader("X-Oembed-Retain-Scripts")?!0:!1):"photo"==a.type?this.insertOembedImage(a):
a.hasOwnProperty("xf-oembed-error")&&this.oembedFetchError(a)},insertOembedHtml:function(a,b){if(void 0===a.html)return!1;XF.setupHtmlInsert({content:a.html},XF.proxy(function(c,d,e){this.$target.addClass("bbOembed--loaded").html(c);this.onComplete()},this),b)},insertOembedImage:function(a){var b=f("<a />",this.getImageLinkData(a));f('<img class="bbImage" data-zoom-target="1" />').appendTo(b).on("load",XF.proxy(this,"onComplete")).attr("src",a.url);this.$target.empty().append(b)},oembedFetchError:function(a){this.$target.addClass("bbOembed--failure");
console.warn("Unable to fetch %s media id: %s",this.options.provider,this.options.id)},getImageLinkData:function(a){var b={rel:"external",target:"_blank"},c={href:["web_page","web_page_short_url","author_url"],title:["title"],"data-author":["author_name"]},d="",e;for(d in c)for(e=0;e<c[d].length;e++)if(a.hasOwnProperty(c[d][e])){b[d]=a[c[d][e]];break}return b},onComplete:function(){f(g).trigger("embed:loaded");XF.layoutChange()}});XF.TweetRenderer=XF.Element.newHandler({options:{tweetId:null,lang:"en",
dnt:"false",related:null,via:null,conversation:"all",cards:"visible",align:null,theme:"light",linkColor:"#2b7bb9"},init:function(){var a=this.options.tweetId+"",b=this;h.twttr&&a.length&&twttr.ready(function(c){c.widgets.createTweet(a,b.$target.get(0),b.options).then(function(){b.$target.find("a").first().remove();f(g).trigger("embed:loaded");XF.layoutChange()})})}});XF.Element.register("oembed","XF.OembedFetcher");XF.Element.register("tweet","XF.TweetRenderer")}(jQuery,window,document);
