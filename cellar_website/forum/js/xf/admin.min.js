'use strict';!function(d,e,m,n){XF.OffCanvasBuilder.acpNav=function(a,b){a.on("off-canvas:opening",function(){a.css("position","")})};XF.AdminNav=XF.Element.newHandler({options:{topOffset:".p-header",stickyTarget:"| .js-navSticky",sectionTogglers:".js-navSectionToggle",toggleTarget:".p-nav-section",toggleSubTarget:".p-nav-listSection",navTester:"| .js-navTester"},$stickyTarget:null,init:function(){this.$stickyTarget=XF.findRelativeIf(this.options.stickyTarget,this.$target);this.refreshSticky();this.$target.on("click",
this.options.sectionTogglers,XF.proxy(this,"togglerClick"));d(e).resize(XF.proxy(this,"refreshSticky"))},isOffCanvas:function(){var a=XF.findRelativeIf(this.options.navTester,this.$target);return a.length?"off-canvas"==e.getComputedStyle(a[0]).getPropertyValue("font-family").replace(/"/g,""):!1},refreshSticky:function(){var a=this.$stickyTarget,b=a.data("sticky_kit");this.isOffCanvas()?b&&a.trigger("sticky_kit:detach").removeData("sticky_kit"):b||(this.$target.trigger("off-canvas:close",{instant:!0}),
b=XF.findRelativeIf(this.options.topOffset,this.$target).height(),a.stick_in_parent({offset_top:b}))},togglerClick:function(a){a.preventDefault();a=d(a.target).closest(this.options.toggleTarget);var b=this.options.toggleSubTarget;a.siblings().not(a).each(function(){var c=d(this);c.removeClassTransitioned("is-active");c.find(b).removeClassTransitioned("is-active")});a.toggleClassTransitioned("is-active",function(){XF.layoutChange()});a.find(b).toggleClassTransitioned("is-active")}});XF.AdminSearch=
XF.Element.newHandler({options:{input:"| .js-adminSearchInput",results:"| .js-adminSearchResults",resultsWrapper:"| .js-adminSearchResultsWrapper",toggleClass:"is-active"},$input:null,$results:null,$resultsWrapper:null,xhr:null,init:function(){var a=this.$target;var b=this.$input=XF.findRelativeIf(this.options.input,a);this.$results=XF.findRelativeIf(this.options.results,a);this.$resultsWrapper=XF.findRelativeIf(this.options.resultsWrapper,a);a.submit(XF.proxy(this,"submit"));XF.watchInputChangeDelayed(b,
function(){a.submit()});b.on("keydown",XF.proxy(this,"keyDown"))},submit:function(a){a.preventDefault();a=this.$target;var b=this.$results,c=this,k=this.$resultsWrapper,f=this.options.toggleClass;d.trim(this.$input.val()).length?(this.xhr&&this.xhr.abort(),this.xhr=XF.ajax("post",a.attr("action"),a.serializeArray(),function(g){g.html&&XF.setupHtmlInsert(g.html,function(h,p,l){h.length?(b.html(h),l(),k.addClass(f),b.addClassTransitioned(f),b.find("a").hover(function(){d(this).addClass("is-active")},
function(){d(this).removeClass("is-active")})):c.emptyResults()})})):this.emptyResults()},emptyResults:function(){var a=this.$results,b=this.$resultsWrapper,c=this.options.toggleClass;a.removeClassTransitioned(c,function(){a.empty();b.removeClass(c)})},keyDown:function(a){switch(a.key){case "ArrowUp":return this.menuNavigate(-1);case "ArrowDown":return this.menuNavigate(1);case "Enter":return this.menuSelect()}},menuNavigate:function(a){var b=this.$results.find("a"),c=b.filter(".is-active");a=b.index(c)+
a;b.removeClass("is-active");0>a?a=b.length-1:a>=b.length&&(a=0);d(b.get(a)).addClass("is-active").focus();this.$input.focus();return!1},menuSelect:function(){var a=this.$results.find("a.is-active");if(a.length)return e.location=a.attr("href"),!1}});XF.AdminToggleAdvanced=XF.Element.newHandler({options:{url:null,value:null},init:function(){d("html").is(".acp--simple-mode")&&this.unhideLinkedOption();this.$target.on("click",XF.proxy(this,"click"))},unhideLinkedOption:function(){var a=e.location.hash.replace(/[^a-zA-Z0-9_-]/g,
"");a&&(a=d(`span#${a}.u-anchorTarget`).next("dl.acp--advanced"))&&a.length&&(a.show(),XF.layoutChange())},click:function(a){if(null!==this.options.value)a=this.options.value?1:0;else if(this.$target.is(":checkbox"))a=this.$target.prop("checked")?1:0;else{console.error("Admin toggler must be a checkbox or provide a data-value");return}this.options.url&&XF.ajax("POST",this.options.url,{advanced:a});d(".js-advancedModeToggle:checkbox").prop("checked",a);d("html").toggleClass("acp--advanced-mode",a).toggleClass("acp--simple-mode",
!a);XF.layoutChange()}});XF.AdminAssetEditor=XF.Element.newHandler({options:{},init:function(){this.$target.find(".js-assetModify").on("click",XF.proxy(this,"modifyClick"))},modifyClick:function(a){a=d(a.currentTarget);var b=a.parent();a.hasClass("is-modify")?this.enableEditing(b):a.hasClass("is-revert")&&this.revertToParent(b)},enableEditing:function(a){var b=a.find(".js-assetKey"),c=a.find(".js-assetValue");a=a.find(".js-assetModify");b.prop("disabled",!1);c.prop("disabled",!1);c.data("parent-value")||
c.data("parent-value",c.val());a.removeClass("is-modify").addClass("is-revert")},revertToParent:function(a){var b=a.find(".js-assetKey"),c=a.find(".js-assetValue");a=a.find(".js-assetModify");b.prop("disabled",!0);c.prop("disabled",!0);c.val(c.data("parent-value"));a.removeClass("is-revert").addClass("is-modify")}});XF.Element.register("admin-toggle-advanced","XF.AdminToggleAdvanced");XF.Element.register("admin-nav","XF.AdminNav");XF.Element.register("admin-search","XF.AdminSearch");XF.Element.register("admin-asset-editor",
"XF.AdminAssetEditor")}(jQuery,window,document);
