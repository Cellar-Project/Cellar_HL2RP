'use strict';!function(b,l,m,n){XF.RemoveLink=XF.Event.newHandler({eventNameSpace:"XFRemoveClick",options:{user:null,href:null},loading:!1,container:null,noResults:null,count:0,init:function(){this.options.href||(this.options.href=b(this.$target).attr("href"));if(null===this.options.user||null===this.options.href)return console.warn("Link found without userId or url defined. %o",this.$target),!1;this.container=b("#user_list_"+this.options.user);this.noResults=b(".js-userListEmpty");this.count=b(".user-link").length},
click:function(a){a.preventDefault();this.loading||this.remove()},remove:function(){this.loading=!0;var a=this;XF.ajax("post",this.options.href,{user_id:this.options.user},function(){a.container.remove();a.count--;1>a.count&&a.noResults.removeClass("u-hidden")},{skipDefault:!0}).always(function(){a.loading=!1})}});XF.AddForm=XF.Element.newHandler({options:{},form:null,userInput:null,noResults:null,init:function(){this.form=b(this.$target);this.form.on("ajax-submit:complete",XF.proxy(this,"formSubmit"));
this.userInput=this.form.find(".users");this.noResults=this.form.find(".js-userListEmpty")},formSubmit:function(a,d){a.preventDefault();if("error"!==d.status){a=d.userIds;var g=null,e=null,c=0;this.userInput.val("").autofocus();for(c=0;c<a.length;c++)0==this.form.find("#user_list_"+a[c]).length&&(e=b(d.users[a[c]]),g?XF.setupHtmlInsert(e,function(f,h,k){f.appendTo(".user-list")}):XF.setupHtmlInsert(e,function(f,h,k){f.prependTo(".user-list")}),0<b(".user-link").length&&this.noResults.addClass("u-hidden")),
g="#user_list_"+a[c]}}});XF.Event.register("click","remove-user","XF.RemoveLink");XF.Element.register("add-user","XF.AddForm")}(jQuery,window,document);
